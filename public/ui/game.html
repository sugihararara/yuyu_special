<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>幽☆遊☆白書 特別篇 - UI モックアップ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            font-family: "MS Gothic", monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            overflow: auto;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0px;
            max-height: 90vh;
            overflow: visible;
        }

        .game-screen {
            width: 512px;
            height: 448px;
            background: #000;
            position: relative;
            border: 2px solid #333;
        }

        /* バトルフィールド */
        .battlefield {
            width: 100%;
            height: 240px;  /* 高さを減らして間隔を詰める */
            background: linear-gradient(to bottom, #4a3030 0%, #2a1818 100%);
            position: relative;
            overflow: hidden;
        }

        /* キャラクター配置エリア */
        .character-area {
            position: absolute;
            bottom: 40px;  /* 下に文字枠用のスペースを確保 */
            width: 100%;
            height: 160px;
            padding: 0;
        }
        
        /* 分割モード用のスタイル */
        .character-area.split-mode {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            padding: 0 40px;
        }
        
        /* 統合モード用のスタイル */
        .character-area.single-mode {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0 20px;
        }
        
        .character {
            width: 120px;
            height: 140px;
            background: #666;
            border: 2px solid #999;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 24px;
            font-weight: bold;
            position: relative;
        }
        
        /* 統合モード用の背景画像エリア */
        .single-image {
            width: 100%;
            height: 140px;  /* キャラクターと同じ高さ */
            background: #444;
            border: 2px solid #999;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 18px;
        }
        
        /* メッセージボックス */
        .message-box {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 35px;
            background: rgba(0, 0, 0, 0.8);
            border-top: 1px solid #666;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 14px;
            font-family: "MS Gothic", monospace;
            padding: 5px;
        }

        .character::after {
            content: 'キャラ画像をここに配置';
            position: absolute;
            bottom: -20px;
            font-size: 10px;
            color: #888;
            white-space: nowrap;
        }

        /* 体力メーター */
        .hp-bar-container {
            position: absolute;
            top: 10px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
        }

        .hp-bar {
            width: 200px;
            height: 16px;
            background: #000;
            border: 2px solid #fff;
            position: relative;
        }

        .hp-bar-inner {
            position: absolute;
            top: 0;
            height: 100%;
        }

        .hp-bar-yellow {
            background: #ffff00;
            width: 100%;
            z-index: 1;
        }

        .hp-bar-red {
            background: #ff0000;
            width: 50%;
            z-index: 2;
        }

        .hp-bar.p2 {
            transform: scaleX(-1);
        }

        /* 闘気メーター */

        .touki-meter {
            width: 180px;
            height: 12px;
            background: #000;
            border: 2px solid #fff;
            position: relative;
            overflow: hidden;  /* はみ出し防止 */
        }

        .touki-meter-fill {
            height: 100%;
            background: #ff0000;  /* 赤色で固定 */
            width: 0px;  /* pxで指定 */
            position: absolute;
            top: 0;
        }

        /* 1Pは右端から左へ伸びる */
        .touki-meter.p1 .touki-meter-fill {
            right: 0;
        }

        /* 2Pは左端から右へ伸びる */
        .touki-meter.p2 .touki-meter-fill {
            left: 0;
        }

        /* バランスメーター */
        .balance-meter-container {
            position: absolute;
            top: 55px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
        }

        .balance-meter {
            width: 160px;
            height: 8px;
            background: #000;
            border: 1px solid #fff;
            position: relative;
        }

        .balance-meter.p2 {
            transform: scaleX(-1);
        }

        .balance-meter.p2 span {
            transform: scaleX(-1);
        }

        .balance-meter-fill {
            height: 100%;
            background: #00ffff;  /* シアンに変更 */
            width: 100%;
            /* 重要：JSアニメーションと意図的に併用して独特の動きを実現 */
            /* 途中で詰まって最後にきゅっと伸びる格ゲーらしい演出 */
            transition: width 0.3s ease;
        }

        /* UIパネル部分 */
        .ui-panel {
            width: 100%;
            height: 210px;  /* 高さを増やす */
            background: #1a1a1a;
            border-top: 3px solid #666;
            position: relative;
            display: flex;
            flex-direction: column;
            padding: 10px;
        }

        /* プレイヤー情報エリア */
        .player-info {
            width: 180px;
            height: 100%;
            border: 2px solid #444;
            background: #0a0a0a;
            padding: 5px;
        }

        /* アイテムストック */
        .item-stock {
            margin-bottom: 10px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .item-stock-label {
            color: #fff;
            font-size: 10px;
        }

        .item-slot {
            width: 60px;
            height: 40px;
            border: 2px solid #666;
            background: #222;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 16px;
            font-weight: bold;
        }

        .item-slot.empty {
            color: #444;
        }

        /* 霊気ゲージ */
        .reiki-gauge {
            margin-top: 10px;
            width: 100%;
            max-width: 100%;
        }

        .reiki-label {
            color: #ffcc00;  /* 黄色に変更 */
            font-size: 12px;
            margin-bottom: 3px;
        }

        .reiki-bar {
            width: 129px;  /* 内部123px(セル75px+間隔48px) + padding4px + border2px = 129px */
            max-width: 100%;
            height: 20px;
            background: #000;
            border: 1px solid #ffcc00;  /* 黄色の枠 */
            display: flex;
            gap: 0;  /* marginで制御するのでgapは0 */
            padding: 2px;  /* padding左右2px */
            box-sizing: border-box;  /* paddingとborderを含む */
            overflow: hidden;
            justify-content: flex-start;  /* 左寄せ */
        }

        .reiki-cell {
            width: 3px;  /* セルを小さく */
            height: 100%;
            background: #333;
            opacity: 0.3;
            border: none;
            margin: 0 1px;  /* 左右に1pxずつ（合計2px）の間隔 */
            flex-shrink: 0;  /* 縮小防止 */
        }

        .reiki-cell:first-child {
            margin-left: 0;  /* 最初のセルは左マージンなし */
        }
        
        .reiki-cell:last-child {
            margin-right: 0;  /* 最後のセルは右マージンなし */
        }
        
        .reiki-cell.filled {
            background: linear-gradient(to bottom, 
                #ffa500 0%,      /* オレンジ */
                #ffffcc 20%,     /* 白っぽい黄色 */
                #ffffee 50%,     /* より白い黄色 */
                #ffffcc 80%,     /* 白っぽい黄色 */
                #ffa500 100%     /* オレンジ */
            );
            opacity: 1;
            box-shadow: 0 0 3px #ffcc00;
            border: none;  /* borderを削除 */
        }
        
        /* 霊気セルの点滅アニメーション */
        @keyframes reiki-blink {
            0% { opacity: 1; box-shadow: 0 0 3px #ffcc00; }
            50% { opacity: 0.2; box-shadow: none; }
            100% { opacity: 1; box-shadow: 0 0 3px #ffcc00; }
        }
        
        .reiki-cell.blinking {
            animation: reiki-blink 0.3s ease-in-out;
        }

        /* 1Pは左から、2Pは右から埋まる */
        .player-info.p1 .reiki-bar {
            flex-direction: row;
        }

        .player-info.p2 .reiki-bar {
            flex-direction: row-reverse;
        }

        /* 霊界水晶玉 */
        .crystal-ball-container {
            width: 120px;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .crystal-ball {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ff00ff, #800080);
            border: 3px solid #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 20px #ff00ff;
            position: relative;
        }

        .crystal-content {
            color: #fff;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px #fff;
        }

        .crystal-label {
            color: #fff;
            font-size: 10px;
            margin-top: 5px;
        }

        /* コマンドインジケーター */
        .command-indicator {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 12px;
            background: rgba(0,0,0,0.7);
            padding: 5px 10px;
            border: 1px solid #666;
        }

        /* デバッグ情報 */
        .debug-info {
            position: absolute;
            top: 5px;
            right: 5px;
            color: #0f0;
            font-size: 10px;
            font-family: monospace;
        }

        /* アニメーション */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .active-player {
            animation: pulse 1s infinite;
        }

        /* メーターのラベル */
        .meter-label {
            position: absolute;
            top: -15px;
            left: 0;
            color: #fff;
            font-size: 10px;
        }

        /* プレイヤーラベル */
        .player-label {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 14px;
            font-weight: bold;
            background: #000;
            padding: 2px 8px;
            border: 1px solid #fff;
        }

        /* 詳細情報オーバーレイ */
        .info-overlay {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            border: 1px solid #666;
            padding: 10px;
            color: #fff;
            font-size: 11px;
            display: none;
        }

        .info-overlay.show {
            display: block;
        }

        .info-overlay h3 {
            color: #0ff;
            margin-bottom: 5px;
        }

        .info-overlay ul {
            list-style: none;
        }

        .info-overlay li {
            margin: 2px 0;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- ゲーム画面全体のコンテナー（スケール変更用） -->
    <div id="game-screen-container" style="
        transform-origin: top left;  /* 左上を基準に拡大 */
        transform: scale(1);          /* デフォルトは1倍 */
        transition: transform 0.3s ease;  /* スムーズな拡大縮小アニメーション */
    ">
    <div class="game-screen">
        <!-- バトルフィールド -->
        <div class="battlefield">
            <!-- HP/闘気/バランスメーター -->
            <div class="hp-bar-container">
                <div class="hp-bar p1">
                    <span class="meter-label">HP</span>
                    <div class="hp-bar-inner hp-bar-yellow"></div>
                    <div class="hp-bar-inner hp-bar-red"></div>
                </div>
                <div class="hp-bar p2">
                    <div class="hp-bar-inner hp-bar-yellow"></div>
                    <div class="hp-bar-inner hp-bar-red"></div>
                </div>
            </div>

            <!-- キャラクター配置 -->
            <div class="character-area split-mode" id="character-area">
                <div class="character">
                    １Ｐ
                </div>
                <div class="character">
                    ２Ｐ
                </div>
            </div>
            
            <!-- メッセージボックス -->
            <div class="message-box" id="message-box">
                ここにメッセージが表示されます
            </div>
        </div>

        <!-- UIパネル -->
        <div class="ui-panel">
            <!-- 上段：闘気とバランスメーター -->
            <div style="width: 100%; display: flex; justify-content: space-between; margin-bottom: 10px; padding: 5px 0;">
                <!-- 1P側メーター -->
                <div style="flex: 1; padding: 0 5px;">
                    <div class="touki-meter p1" style="width: 100%; height: 12px; background: #000; border: 2px solid #fff; position: relative;">
                        <span style="position: absolute; top: -15px; left: 0; color: #fff; font-size: 10px;">闘気</span>
                        <div class="touki-meter-fill" id="touki1" style="height: 100%; background: #ff0000; width: 0px; position: absolute; top: 0; right: 0;"></div>
                    </div>
                    <div style="display: flex; align-items: center; margin-top: 20px;">
                        <div class="balance-meter p1" style="flex: 1; height: 8px; background: #000; border: 1px solid #fff; position: relative;">
                            <span style="position: absolute; top: -15px; left: 0; color: #fff; font-size: 10px;">バランス</span>
                            <div class="balance-meter-fill" style="height: 100%; background: #00ffff; width: 100%;"></div>
                        </div>
                        <!-- 1P入力受付ランプ -->
                        <div id="input-lamp-1p" style="width: 20px; height: 20px; border-radius: 50%; background: #0080ff; border: 2px solid #fff; margin-left: 10px; box-shadow: 0 0 10px #0080ff;"></div>
                    </div>
                </div>
                
                <!-- 中央の空白 -->
                <div style="width: 50px;"></div>
                
                <!-- 2P側メーター -->
                <div style="flex: 1; padding: 0 5px;">
                    <div class="touki-meter p2" style="width: 100%; height: 12px; background: #000; border: 2px solid #fff; position: relative;">
                        <span style="position: absolute; top: -15px; right: 0; color: #fff; font-size: 10px;">闘気</span>
                        <div class="touki-meter-fill" id="touki2" style="height: 100%; background: #ff0000; width: 0px; position: absolute; top: 0; left: 0;"></div>
                    </div>
                    <div style="display: flex; align-items: center; margin-top: 20px;">
                        <!-- 2P入力受付ランプ -->
                        <div id="input-lamp-2p" style="width: 20px; height: 20px; border-radius: 50%; background: #0080ff; border: 2px solid #fff; margin-right: 10px; box-shadow: 0 0 10px #0080ff;"></div>
                        <div class="balance-meter p2" style="flex: 1; height: 8px; background: #000; border: 1px solid #fff; position: relative;">
                            <span style="position: absolute; top: -15px; right: 0; color: #fff; font-size: 10px;">バランス</span>
                            <div class="balance-meter-fill" style="height: 100%; background: #00ffff; width: 100%;"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 下段：既存のプレイヤー情報 -->
            <div style="display: flex; justify-content: center; align-items: center; width: 100%; gap: 10px;">
                <!-- 1Pエリア -->
                <div class="player-info p1" style="
                    display: grid;
                    grid-template-columns: 1fr 40px;
                    grid-template-rows: auto auto;
                    gap: 2px;
                    align-items: start;
                    padding-right: 5px;
                ">
                    <!-- アイテム枠（左上） -->
                    <div class="item-stock" style="grid-column: 1; grid-row: 1; justify-self: end;">
                        <div class="item-stock-label">アイテム</div>
                        <div class="item-slot">愛(大)</div>
                    </div>
                    
                    <!-- 1P入力可能ランプ（右上） -->
                    <div class="input-buttons-lamp" id="input-buttons-1p" style="
                        grid-column: 2;
                        grid-row: 1;
                        width: 35px;
                        height: 35px;
                        position: relative;
                        justify-self: end;
                    ">
                        <!-- 上（Y:青） -->
                        <div id="btn-1p-y" style="position: absolute; top: 2px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; border-radius: 50%; background: #0080ff; border: 1px solid #fff;"></div>
                        <!-- 左（X:緑） -->
                        <div id="btn-1p-x" style="position: absolute; top: 50%; left: 2px; transform: translateY(-50%); width: 10px; height: 10px; border-radius: 50%; background: #00ff00; border: 1px solid #fff;"></div>
                        <!-- 下（B:黄） -->
                        <div id="btn-1p-b" style="position: absolute; bottom: 2px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; border-radius: 50%; background: #ffff00; border: 1px solid #fff;"></div>
                        <!-- 右（A:赤） -->
                        <div id="btn-1p-a" style="position: absolute; top: 50%; right: 2px; transform: translateY(-50%); width: 10px; height: 10px; border-radius: 50%; background: #ff0000; border: 1px solid #fff;"></div>
                    </div>
                    
                    <!-- 霊気ゲージ（下段、両列にまたがる） -->
                    <div class="reiki-gauge" style="grid-column: 1 / 3; grid-row: 2; width: 100%;">
                        <div class="reiki-label">霊気ゲージ (20/25)</div>
                        <div class="reiki-bar">
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                            <div class="reiki-cell"></div>
                            <div class="reiki-cell"></div>
                            <div class="reiki-cell"></div>
                            <div class="reiki-cell"></div>
                            <div class="reiki-cell"></div>
                        </div>
                    </div>
                </div>

            <!-- 霊界水晶玉 -->
            <div class="crystal-ball-container">
                <div class="crystal-ball">
                    <div class="crystal-content">●●●</div>
                </div>
                <div class="crystal-label">霊界水晶玉</div>
            </div>

            <!-- 2Pエリア -->
            <div class="player-info p2" style="
                display: grid;
                grid-template-columns: 40px 1fr;
                grid-template-rows: auto auto;
                gap: 2px;
                align-items: start;
                padding-left: 5px;
            ">
                <!-- 2P入力可能ランプ（左上） -->
                <div class="input-buttons-lamp" id="input-buttons-2p" style="
                    grid-column: 1;
                    grid-row: 1;
                    width: 35px;
                    height: 35px;
                    position: relative;
                    justify-self: start;
                ">
                    <!-- 上（Y:青） -->
                    <div id="btn-2p-y" style="position: absolute; top: 2px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; border-radius: 50%; background: #0080ff; border: 1px solid #fff;"></div>
                    <!-- 左（X:緑） -->
                    <div id="btn-2p-x" style="position: absolute; top: 50%; left: 2px; transform: translateY(-50%); width: 10px; height: 10px; border-radius: 50%; background: #00ff00; border: 1px solid #fff;"></div>
                    <!-- 下（B:黄） -->
                    <div id="btn-2p-b" style="position: absolute; bottom: 2px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; border-radius: 50%; background: #ffff00; border: 1px solid #fff;"></div>
                    <!-- 右（A:赤） -->
                    <div id="btn-2p-a" style="position: absolute; top: 50%; right: 2px; transform: translateY(-50%); width: 10px; height: 10px; border-radius: 50%; background: #ff0000; border: 1px solid #fff;"></div>
                </div>
                
                <!-- アイテム枠（右上） -->
                <div class="item-stock" style="grid-column: 2; grid-row: 1;">
                    <div class="item-stock-label">アイテム</div>
                    <div class="item-slot empty">---</div>
                </div>
                
                <!-- 霊気ゲージ（下段、両列にまたがる） -->
                <div class="reiki-gauge" style="grid-column: 1 / 3; grid-row: 2; width: 100%;">
                    <div class="reiki-label">霊気ゲージ (12/25)</div>
                    <div class="reiki-bar">
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell filled"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                        <div class="reiki-cell"></div>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>
    <!-- ゲーム画面コンテナー終了 -->

        <!-- コマンド表示 -->
        <!-- <div class="command-indicator">
            十字キー：選択 | A：決定 | B：キャンセル
        </div> -->

        <!-- デバッグ情報 -->
        <div class="debug-info">
            FPS: 60 | State: READY
        </div>

        <!-- 情報オーバーレイ -->
        <div class="info-overlay" id="infoOverlay">
            <h3>画像差し替えガイド</h3>
            <ul>
                <li>• .character クラス内に画像配置</li>
                <li>• 推奨サイズ: 120x140px</li>
                <li>• 背景は透過PNG推奨</li>
                <li>• アイテムアイコン: 30x30px</li>
            </ul>
        </div>
    </div>

    <!-- デバッグコントロールパネル（開発用） -->
    <div id="debug-control-panel" style="
        width: 512px;
        background: rgba(20, 20, 20, 0.95);
        border: 2px solid #666;
        border-top: none;
        padding: 10px;
        color: #fff;
        font-family: monospace;
        font-size: 11px;
        margin-top: -2px;
    ">
        <div style="text-align: center; margin-bottom: 8px;">
            <strong style="color: #0ff;">= デバッグコントロール =</strong>
        </div>

        <!-- 画面スケール調整（最上部） -->
        <div style="margin-bottom: 8px; padding: 4px; border: 1px solid #444; background: #2a2a2a;">
            <strong style="color: #ff0;">画面スケール:</strong>
            <button id="scale-0.5x">0.5x</button>
            <button id="scale-1x" style="background: #060;">1x</button>
            <button id="scale-1.5x">1.5x</button>
            <button id="scale-2x">2x</button>
            <button id="scale-3x">3x</button>
            <span style="margin-left: 10px; color: #888;">現在: <span id="current-scale">1.0</span>倍</span>
        </div>

        <!-- HP調整（上部） -->
        <div style="margin-bottom: 8px; padding: 4px; border: 1px solid #444;">
            <strong style="color: #ff0;">HP:</strong><br>
            1P: <input type="number" id="hp1-input" min="0" max="100" value="100" style="width: 50px; background: #222; color: #fff; border: 1px solid #666;">%
            <button id="hp1-set">設定</button>
            <button id="hp1-0">0%</button>
            <button id="hp1-50">50%</button>
            <button id="hp1-100">100%</button>
            <span style="margin-left: 5px;">現在: <span id="hp1-value">100</span>%</span><br>
            2P: <input type="number" id="hp2-input" min="0" max="100" value="100" style="width: 50px; background: #222; color: #fff; border: 1px solid #666;">%
            <button id="hp2-set">設定</button>
            <button id="hp2-0">0%</button>
            <button id="hp2-50">50%</button>
            <button id="hp2-100">100%</button>
            <span style="margin-left: 5px;">現在: <span id="hp2-value">100</span>%</span>
        </div>

        <!-- 画面モード切替（中央上） -->
        <div style="margin-bottom: 8px; padding: 4px; border: 1px solid #444;">
            <strong style="color: #ff0;">画面モード:</strong>
            <button id="mode-split">分割モード</button>
            <button id="mode-single">統合モード</button>
            <button id="mode-bg-test">テスト背景</button><br>
            <strong style="color: #ff0;">点滅:</strong>
            <button id="blink-1p">1P点滅</button>
            <button id="blink-2p">2P点滅</button>
            <button id="blink-none">点滅なし</button>
        </div>
        
        <!-- メッセージ設定（中央下） -->
        <div style="margin-bottom: 8px; padding: 4px; border: 1px solid #444;">
            <strong style="color: #ff0;">メッセージ:</strong><br>
            <input type="text" id="message-input" style="width: 300px; background: #222; color: #fff; border: 1px solid #666;" placeholder="メッセージを入力">
            <button id="message-set">反映</button>
            <button id="message-clear">クリア</button><br>
            <button id="message-sample1">サンプル1</button>
            <button id="message-sample2">サンプル2</button>
        </div>

        <!-- 闘気コントロール（下部上） -->
        <div style="margin-bottom: 8px; padding: 4px; border: 1px solid #444;">
            <strong style="color: #ff0;">闘気:</strong><br>
            1P: <button id="touki1-charge" style="background: #400;">押して溜める</button>
            <button id="touki1-reset">リセット</button>
            <button id="touki1-set50">50%</button>
            <button id="touki1-set100">100%</button>
            <span style="margin-left: 5px;"><span id="touki1-value">0</span>/96</span><br>
            2P: <button id="touki2-charge" style="background: #400;">押して溜める</button>
            <button id="touki2-reset">リセット</button>
            <button id="touki2-set50">50%</button>
            <button id="touki2-set100">100%</button>
            <span style="margin-left: 5px;"><span id="touki2-value">0</span>/96</span><br>
            <strong style="color: #ff0;">1P色:</strong>
            <button id="touki1-color-red">赤</button>
            <button id="touki1-color-cyan">水色</button>
            <button id="touki1-color-purple">紫</button>
            　<strong style="color: #ff0;">2P色:</strong>
            <button id="touki2-color-red">赤</button>
            <button id="touki2-color-cyan">水色</button>
            <button id="touki2-color-purple">紫</button>
        </div>

        <!-- バランス調整（下部中） -->
        <div style="margin-bottom: 8px; padding: 4px; border: 1px solid #444;">
            <strong style="color: #ff0;">バランス:</strong><br>
            1P: <input type="number" id="balance1-input" min="0" max="255" value="0" style="width: 50px; background: #222; color: #fff; border: 1px solid #666;">
            <button id="balance1-set">設定</button>
            <button id="balance1-0">0%</button>
            <button id="balance1-50">50%</button>
            <button id="balance1-100">100%</button>
            <span style="margin-left: 5px;">現在: <span id="balance1-value">0</span></span><br>
            2P: <input type="number" id="balance2-input" min="0" max="255" value="0" style="width: 50px; background: #222; color: #fff; border: 1px solid #666;">
            <button id="balance2-set">設定</button>
            <button id="balance2-0">0%</button>
            <button id="balance2-50">50%</button>
            <button id="balance2-100">100%</button>
            <span style="margin-left: 5px;">現在: <span id="balance2-value">0</span></span><br>
            <strong style="color: #ff0;">入力ランプ:</strong>
            1P: <button id="lamp1-blue">青</button><button id="lamp1-yellow">黄</button><button id="lamp1-red">赤</button>
            　2P: <button id="lamp2-blue">青</button><button id="lamp2-yellow">黄</button><button id="lamp2-red">赤</button>
        </div>

        <!-- アイテム・霊気（下部下左右） -->
        <div style="margin-bottom: 8px; padding: 4px; border: 1px solid #444;">
            <strong style="color: #ff0;">アイテム/霊気:</strong><br>
            1P アイテム: 
            <button id="item1-none">なし</button>
            <button id="item1-ai-small">愛小</button>
            <button id="item1-ai-large">愛大</button>
            <button id="item1-ki-small">気小</button>
            <button id="item1-ki-large">気大</button>
            <button id="item1-rei-small">霊小</button>
            <button id="item1-rei-large">霊大</button><br>
            1P 霊気: <input type="number" id="reiki1-input" min="0" max="25" value="20" style="width: 40px; background: #222; color: #fff; border: 1px solid #666;">
            <button id="reiki1-set">設定</button>
            <button id="reiki1-0">0</button>
            <button id="reiki1-20">20</button>
            <button id="reiki1-25">25</button>
            <span style="margin-left: 5px;">現在: <span id="reiki1-value">20</span></span><br>
            2P アイテム: 
            <button id="item2-none">なし</button>
            <button id="item2-ai-small">愛小</button>
            <button id="item2-ai-large">愛大</button>
            <button id="item2-ki-small">気小</button>
            <button id="item2-ki-large">気大</button>
            <button id="item2-rei-small">霊小</button>
            <button id="item2-rei-large">霊大</button><br>
            2P 霊気: <input type="number" id="reiki2-input" min="0" max="25" value="20" style="width: 40px; background: #222; color: #fff; border: 1px solid #666;">
            <button id="reiki2-set">設定</button>
            <button id="reiki2-0">0</button>
            <button id="reiki2-20">20</button>
            <button id="reiki2-25">25</button>
            <span style="margin-left: 5px;">現在: <span id="reiki2-value">20</span></span><br>
            <strong style="color: #ff0;">ボタン:</strong>
            1P: <button id="btn1-all">全ON</button><button id="btn1-none">全OFF</button>
            <button id="btn1-toggle-a">A</button><button id="btn1-toggle-b">B</button>
            <button id="btn1-toggle-x">X</button><button id="btn1-toggle-y">Y</button><br>
            　　2P: <button id="btn2-all">全ON</button><button id="btn2-none">全OFF</button>
            <button id="btn2-toggle-a">A</button><button id="btn2-toggle-b">B</button>
            <button id="btn2-toggle-x">X</button><button id="btn2-toggle-y">Y</button>
        </div>

        <!-- 霊界水晶玉（下部中央） -->
        <div style="margin-bottom: 8px; padding: 4px; border: 1px solid #444;">
            <strong style="color: #ff0;">水晶玉:</strong><br>
            アイテム: 
            <button id="crystal-item-none">なし</button>
            <button id="crystal-item-ai-small">愛小</button>
            <button id="crystal-item-ai-large">愛大</button>
            <button id="crystal-item-ki-small">気小</button>
            <button id="crystal-item-ki-large">気大</button>
            <button id="crystal-item-rei-small">霊小</button>
            <button id="crystal-item-rei-large">霊大</button><br>
            霊気: 
            <button id="crystal-reiki-2">2個</button>
            <button id="crystal-reiki-3">3個</button>
            <button id="crystal-reiki-4">4個</button>
            <button id="crystal-reiki-5">5個</button>
            <button id="crystal-reiki-6">6個</button>
            <button id="crystal-clear">クリア</button>
            <span style="margin-left: 10px;">現在: <span id="crystal-value">●●●</span></span>
        </div>

        <!-- パネル表示/非表示 -->
        <div style="text-align: center; margin-top: 8px;">
            <button onclick="document.getElementById('debug-control-panel').style.display='none'">パネルを隠す</button>
            <span style="margin-left: 10px; color: #888;">（Ctrl+Dで再表示）</span>
        </div>
    </div>
    </div>

    <script>
        // ========================================
        // 画面スケール機能
        // ========================================
        // Migrated to TypeScript: src/ui/renderers/ScreenScaleRenderer.ts
        // Event listeners: src/game.ts

        // ========================================
        // 闘気メーター関連のコード
        // ========================================
        // Migrated to TypeScript: src/ui/renderers/ToukiRenderer.ts
        // Event listeners: src/game.ts
        
        // ========================================
        // HPメーター関連のコード
        // ========================================
        // Migrated to TypeScript: src/ui/renderers/HPRenderer.ts
        // Event listeners: src/game.ts
        
        // ========================================
        // バランスメーター関連のコード
        // ========================================
        // Migrated to TypeScript: src/ui/renderers/BalanceRenderer.ts
        // Event listeners: src/game.ts
        
        // ========================================
        // アイテム・霊気ゲージ関連のコード
        // ========================================
        // Migrated to TypeScript: src/ui/renderers/ReikiRenderer.ts
        // Event listeners: src/game.ts
        
        // ========================================
        // 霊界水晶玉関連のコード
        // ========================================
        // Migrated to TypeScript: src/ui/renderers/CrystalBallRenderer.ts
        // Event listeners: src/game.ts
        
        // ========================================
        // 入力受付ランプ関連のコード
        // ========================================
        // Migrated to TypeScript: src/ui/renderers/InputLampRenderer.ts
        // Event listeners: src/game.ts
        
        // ========================================
        // ボタンランプ関連のコード
        // ========================================
        // Migrated to TypeScript: src/ui/renderers/ButtonLampsRenderer.ts
        // Event listeners: src/game.ts
        
        // ========================================
        // メッセージ・戦闘画面関連のコード
        // ========================================
        // Migrated to TypeScript: src/ui/renderers/BattlefieldRenderer.ts
        // Event listeners: src/game.ts
        
        // ========================================
        // その他の機能
        // ========================================
        
        // インフォメーション表示切り替え
        document.addEventListener('keypress', (e) => {
            if (e.key === 'i' || e.key === 'I') {
                const overlay = document.getElementById('infoOverlay');
                overlay.classList.toggle('show');
            }
        });

        // 画像差し替え用のヘルパー関数
        function replaceCharacterImage(playerNum, imagePath) {
            const selector = playerNum === 1 ? '.character:first-child' : '.character:last-child';
            const character = document.querySelector(selector);
            if (character && imagePath) {
                character.style.backgroundImage = `url(${imagePath})`;
                character.style.backgroundSize = 'contain';
                character.style.backgroundPosition = 'center';
                character.style.backgroundRepeat = 'no-repeat';
                character.innerHTML = '';  // テキストをクリア
            }
        }

        // 使用例（コンソールから実行可能）
        // replaceCharacterImage(1, 'path/to/character1.png');
        // replaceCharacterImage(2, 'path/to/character2.png');

        // デバッグパネルの表示/非表示ショートカット（Ctrl+D）
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'd') {
                e.preventDefault();
                const panel = document.getElementById('debug-control-panel');
                if (panel) {
                    panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
                }
            }
        });

        // デバッグパネルの表示/非表示ショートカット（Ctrl+D）
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'd') {
                e.preventDefault();
                const panel = document.getElementById('debug-control-panel');
                if (panel) {
                    panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
                }
            }
        });
    </script>

    </div>

    <!-- コントロールパネル用のスタイル -->
    <style>
        #debug-control-panel button {
            padding: 2px 6px;
            margin: 2px;
            background: #333;
            color: #fff;
            border: 1px solid #666;
            cursor: pointer;
            font-size: 11px;
        }

        #debug-control-panel button:hover {
            background: #555;
            border-color: #888;
        }

        #debug-control-panel button:active {
            background: #222;
        }
    </style>

    <!-- TypeScript Game Engine -->
    <script type="module" src="/src/game.ts"></script>
</body>
</html>